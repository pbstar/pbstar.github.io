"use strict";(self["webpackChunkvue2_pbstar_admin"]=self["webpackChunkvue2_pbstar_admin"]||[]).push([[589],{2589:function(t,e,i){i.r(e),i.d(e,{default:function(){return c}});var o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"box"},[e("div",{staticClass:"top"},[e("div",{staticClass:"tLeft"},[e("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.getList}},[t._v("搜索")])],1),e("div",{staticClass:"tRight"},[e("el-button",{attrs:{type:"primary"},on:{click:t.toAdd}},[t._v("添加")])],1)]),e("div",{staticClass:"table"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[e("el-table-column",{attrs:{prop:"date",label:"序号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",[t._v(t._s(i.$index+1))])]}}])}),e("el-table-column",{attrs:{align:"center",prop:"name",label:"角色名称","min-width":"130"}}),e("el-table-column",{attrs:{align:"center",prop:"description",label:"角色描述","min-width":"130"}}),e("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"180",align:"center"}}),e("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleClick(i.row)}}},[t._v("编辑")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:1!=i.row.id,expression:"scope.row.id != 1"}],attrs:{type:"text",size:"small"},on:{click:function(e){return t.toAuthorityBox(i.row)}}},[t._v("设置权限")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:1!=i.row.id,expression:"scope.row.id != 1"}],attrs:{type:"text",size:"small"},on:{click:function(e){return t.toDel(i.row)}}},[t._v("删除")])]}}])})],1)],1),e("el-dialog",{attrs:{title:"设置权限",visible:t.isShowAuthorityBox,width:"500px"},on:{"update:visible":function(e){t.isShowAuthorityBox=e}}},[e("el-tree",{ref:"rootTree",attrs:{data:t.leftNavList,props:t.props,"show-checkbox":"","node-key":"index"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.isShowAuthorityBox=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getKeys()}}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:t.isEdit?"编辑角色":"添加角色",visible:t.isShowRoleInfoBox,width:"500px"},on:{"update:visible":function(e){t.isShowRoleInfoBox=e}}},[e("el-form",{attrs:{"label-width":"80px"}},[e("el-form-item",{attrs:{label:"角色名称",required:""}},[e("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:t.roleInfo.name,callback:function(e){t.$set(t.roleInfo,"name",e)},expression:"roleInfo.name"}})],1),e("el-form-item",{attrs:{label:"角色描述",required:""}},[e("el-input",{attrs:{placeholder:"请输入角色描述"},model:{value:t.roleInfo.description,callback:function(e){t.$set(t.roleInfo,"description",e)},expression:"roleInfo.description"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.isShowRoleInfoBox=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.toRoleItem()}}},[t._v("确 定")])],1)],1)],1)])},n=[],l=i(8921),s={name:"adminBusinessArticleList",data(){return{input:"",list:[],isShowAuthorityBox:!1,leftNavList:[],props:{label:"title",children:"child"},rowInfo:null,roleInfo:{id:0,name:"",description:"",createTime:"2023-01-01 12:00:00",isDelete:0,authority:"adminHome"},isEdit:!1,isShowRoleInfoBox:!1}},created(){this.leftNavList=l,this.getList()},methods:{getList(){this.$http.post("getRoleList").then((t=>{200==t.code&&(this.list=t.data)}))},handleClick(t){this.roleInfo=t,this.isEdit=!0,this.isShowRoleInfoBox=!0},toAuthorityBox(t){this.rowInfo=t,this.isShowAuthorityBox=!0,this.$nextTick((()=>{this.$refs.rootTree.setCheckedKeys(t.authority.split(","))}))},getKeys(){let t=this.$refs.rootTree.getCheckedKeys().join(","),e=this.rowInfo.id;this.$http.post("toAuthority",{authority:t,id:e}).then((t=>{200==t.code&&(this.getList(),this.$message({message:"设置成功",type:"success"}),this.isShowAuthorityBox=!1)}))},toDel(t){this.$message({message:"暂不支持删除",type:"warning"})},toAdd(){this.roleInfo={id:0,name:"",description:"",createTime:"2023-01-01 12:00:00",isDelete:0,authority:"adminHome"},this.isEdit=!1,this.isShowRoleInfoBox=!0},toRoleItem(){this.roleInfo.name?this.roleInfo.description?this.$http.post("toRoleItem",{info:this.roleInfo,isEdit:this.isEdit}).then((t=>{200==t.code&&(this.getList(),this.isShowRoleInfoBox=!1,this.$message({message:this.isEdit?"修改成功":"添加成功",type:"success"}))})):this.$message({message:"角色描述不能为空！",type:"warning"}):this.$message({message:"角色名称不能为空！",type:"warning"})}}},a=s,r=i(1001),d=(0,r.Z)(a,o,n,!1,null,"ef09a026",null),c=d.exports},8921:function(t){t.exports=JSON.parse('[{"index":"adminHome","icon":"el-icon-house","title":"首页"},{"index":"adminManager","icon":"el-icon-user","title":"管理员管理"},{"index":"adminBusiness","icon":"el-icon-copy-document","title":"综合业务","child":[{"index":"adminBusinessArticleList","title":"文章管理"}]},{"index":"adminEcharts","icon":"el-icon-pie-chart","title":"ECharts图表","child":[{"index":"adminEchartsIndex","title":"普通图表"},{"index":"adminEchartsMap","title":"地图"}]},{"index":"adminImg","icon":"el-icon-picture-outline","title":"图片文件","child":[{"index":"adminImgPreview","title":"预览"},{"index":"adminImgShear","title":"裁剪"},{"index":"adminImgExport","title":"导出"}]},{"index":"adminPdf","icon":"el-icon-notebook-2","title":"PDF文件","child":[{"index":"adminPdfPreview","title":"预览"},{"index":"adminPdfExport","title":"导出"}]},{"index":"adminZip","icon":"el-icon-s-cooperation","title":"ZIP压缩包"},{"index":"adminExcel","icon":"el-icon-tickets","title":"Excel文件"},{"index":"adminVideo","icon":"el-icon-video-play","title":"视频播放","child":[{"index":"adminVideoXgPlayer","title":"xgPlayer"}]},{"index":"adminModule","icon":"el-icon-help","title":"功能组件","child":[{"index":"adminModuleSignature","title":"电子签名"},{"index":"adminModuleVerificationCode","title":"验证码"}]},{"index":"adminUpload","icon":"el-icon-upload","title":"文件上传"},{"index":"adminEditer","icon":"el-icon-edit-outline","title":"富文本编辑器","child":[{"index":"adminEditerWangEditer","title":"wangEditer"}]},{"index":"adminRole","icon":"el-icon-connection","title":"角色管理"}]')}}]);