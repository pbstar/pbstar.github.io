"use strict";(self["webpackChunkvue2_pbstar_admin"]=self["webpackChunkvue2_pbstar_admin"]||[]).push([[868],{8868:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});var o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"box"},[e("div",{staticClass:"top"},[e("div",{staticClass:"tLeft"},[e("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.getList}},[t._v("搜索")])],1),e("div",{staticClass:"tRight"},[e("el-button",{attrs:{type:"primary"},on:{click:t.toAdd}},[t._v("添加")])],1)]),e("div",{staticClass:"table"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[e("el-table-column",{attrs:{prop:"date",label:"序号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("span",[t._v(t._s(s.$index+1))])]}}])}),e("el-table-column",{attrs:{align:"center",prop:"name",label:"姓名","min-width":"100"}}),e("el-table-column",{attrs:{align:"center",prop:"account",label:"账号","min-width":"100"}}),e("el-table-column",{attrs:{align:"center",prop:"role",label:"角色","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("span",[t._v(t._s(t.getRole(s.row.role)))])]}}])}),e("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"180",align:"center"}}),e("el-table-column",{attrs:{prop:"isActive",label:"状态",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-switch",{on:{change:function(e){return t.toUserActive(s.row)}},model:{value:s.row.isActive,callback:function(e){t.$set(s.row,"isActive",e)},expression:"scope.row.isActive"}})]}}])}),e("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleClick(s.row)}}},[t._v("编辑")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:"admin"!=s.row.account,expression:"scope.row.account != 'admin'"}],attrs:{type:"text",size:"small"},on:{click:function(e){return t.toRoleBox(s.row)}}},[t._v("设置角色")]),e("el-button",{directives:[{name:"show",rawName:"v-show",value:"admin"!=s.row.account,expression:"scope.row.account != 'admin'"}],attrs:{type:"text",size:"small"},on:{click:function(e){return t.toDel(s.row)}}},[t._v("删除")])]}}])})],1)],1),e("el-dialog",{attrs:{title:"设置角色",visible:t.isShowRoleBox,width:"500px"},on:{"update:visible":function(e){t.isShowRoleBox=e}}},[e("el-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},t._l(t.roleList,(function(s,o){return e("el-radio",{key:o,attrs:{label:s.id}},[t._v(t._s(s.name))])})),1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.isShowRoleBox=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.toRole()}}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:t.isEdit?"编辑管理员":"添加管理员",visible:t.isShowUserInfoBox,width:"500px"},on:{"update:visible":function(e){t.isShowUserInfoBox=e}}},[e("el-form",{attrs:{"label-width":"52px"}},[e("el-form-item",{attrs:{label:"姓名",required:""}},[e("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.userInfo.name,callback:function(e){t.$set(t.userInfo,"name",e)},expression:"userInfo.name"}})],1),e("el-form-item",{attrs:{label:"账号",required:""}},[e("el-input",{attrs:{readonly:t.isEdit,placeholder:"请输入账号"},model:{value:t.userInfo.account,callback:function(e){t.$set(t.userInfo,"account",e)},expression:"userInfo.account"}})],1),e("el-form-item",{attrs:{label:"密码",required:""}},[e("el-input",{attrs:{placeholder:"请输入密码"},model:{value:t.userInfo.password,callback:function(e){t.$set(t.userInfo,"password",e)},expression:"userInfo.password"}})],1),e("el-form-item",{attrs:{label:"角色",required:""}},[e("el-select",{attrs:{placeholder:"请选择角色"},model:{value:t.userInfo.role,callback:function(e){t.$set(t.userInfo,"role",e)},expression:"userInfo.role"}},t._l(t.roleList,(function(t,s){return e("el-option",{key:s,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",{attrs:{label:"状态",required:""}},[e("el-switch",{model:{value:t.userInfo.isActive,callback:function(e){t.$set(t.userInfo,"isActive",e)},expression:"userInfo.isActive"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.isShowUserInfoBox=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.toUser()}}},[t._v("确 定")])],1)],1)],1)])},i=[],l={name:"adminBusinessArticleList",data(){return{input:"",list:[],roleList:[],isShowRoleBox:!1,props:{label:"title",children:"child"},radio:0,rowInfo:"",userInfo:{name:"",account:"",password:"",role:1,createTime:"2023-01-01 12:00:00",isActive:0,isDelete:0},isEdit:!1,isShowUserInfoBox:!1}},created(){this.getList(),this.getRoleList()},methods:{getList(){this.$http.post("getUserList").then((t=>{if(200==t.code){for(let e=0;e<t.data.length;e++)t.data[e].isActive=0==t.data[e].isActive;this.list=t.data}}))},getRoleList(){this.$http.post("getRoleList").then((t=>{200==t.code&&(this.roleList=t.data)}))},getRole(t){let e="";for(let s=0;s<this.roleList.length;s++)this.roleList[s].id==t&&(e=this.roleList[s].name);return e},toRoleBox(t){this.rowInfo=t,this.radio=t.role,this.isShowRoleBox=!0},toRole(){this.$http.post("toRole",{account:this.rowInfo.account,role:this.radio}).then((t=>{200==t.code&&(this.getList(),this.$message({message:"设置成功",type:"success"}),this.isShowRoleBox=!1)}))},toUserActive(t){this.$http.post("toUserActive",{account:t.account,isActive:t.isActive?0:1}).then((t=>{200==t.code&&this.$message({message:"修改状态成功",type:"success"})}))},handleClick(t){this.userInfo=t,this.isEdit=!0,this.isShowUserInfoBox=!0},toDel(t){this.$message({message:"暂不支持删除",type:"warning"})},toAdd(){this.userInfo={name:"",account:"",password:"",role:1,createTime:"2023-01-01 12:00:00",isActive:!0,isDelete:0},this.isEdit=!1,this.isShowUserInfoBox=!0},toUser(){this.userInfo.name?this.userInfo.account?this.userInfo.password?(this.userInfo.isActive=this.userInfo.isActive?0:1,this.$http.post("toUser",{info:this.userInfo,isEdit:this.isEdit}).then((t=>{200==t.code&&(this.getList(),this.isShowUserInfoBox=!1,this.$message({message:this.isEdit?"修改成功":"添加成功",type:"success"}))}))):this.$message({message:"密码不能为空！",type:"warning"}):this.$message({message:"账号不能为空！",type:"warning"}):this.$message({message:"姓名不能为空！",type:"warning"})}}},n=l,a=s(1001),r=(0,a.Z)(n,o,i,!1,null,"27689a48",null),c=r.exports}}]);